<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="member">
 	
 	<!-- 회원가입 -->
 	<insert id="insertMember">
 	INSERT INTO member_tb
 	(mid, mpw, mname, mmail, menter)
 	VALUES (#{mid},#{mpw},#{mname},#{mmail},now())	
 	</insert>
 	<!-- 로그인 -->
 	<select id="checkLogin" resultType="String">
 	SELECT mid, mpw
 	FROM member_tb
 	WHERE mid=#{mid} AND mpw=#{mpw}
 	</select>
 	<!-- 아이디 찾기 -->
 	<select id="findId" resultType="String">
 	SELECT mid
 	FROM member_tb
 	where mname=#{mname} AND mmail=#{mmail}
 	</select>
 	<!-- 비밀번호 찾기 -->
 	<select id="findPw" resultType="Map">
 	SELECT mpw
 	FROM member_tb
 	WHERE mid=#{mid} AND mname=#{mname} AND mmail=#{mmail}
 	</select>
 	<!-- 비밀번호 변경 -->
 	<update id="updatePw">
 	UPDATE member_tb
 	SET mpw=#{mpw} 
 	WHERE mid=#{mid}
 	</update>
 	<select id="info" resultType="com.company.spring.member.MemberVO">
 	SELECT *
 	FROM member_tb
 	WHERE mid = #{mid}
 	</select>
 	<update id="updateInfo">
 	UPDATE member_tb
 	SET mpw=#{mpw}, mname=#{mname}, mmail=#{mmail}
 	WHERE midx = #{midx}
 	</update>
 	<delete id="dropMember">
 	DELETE 
 	FROM member_tb
 	WHERE mid=#{mid}
 	</delete>
 	<select id="checkPw" resultType="int">
 	SELECT count(*)
 	FROM member_tb
 	WHERE mid=#{mid} AND mpw=#{mpw}
 	</select>
 	<select id="checkId" resultType="com.company.spring.member.MemberVO">
 	SELECT mid
 	FROM member_tb
 	WHERE mid=#{mid}
 	</select>
 	<select id="selectByEmail" resultType="com.company.spring.member.MemberVO">
 	SELECT mmail,mname
 	FROM member_tb
 	WHERE mmail = #{mmail}
 	</select>
</mapper>
